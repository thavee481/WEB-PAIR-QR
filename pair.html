<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pair with Me</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f0f0f0;
    padding: 20px;
    text-align: center;
  }
  input, button {
    padding: 10px;
    margin: 5px;
  }
</style>
</head>
<body>

<h2>WhatsApp Pair & Send</h2>

<!-- Pairing number -->
<input type="text" id="number" placeholder="Your WhatsApp number with country code"><br>

<!-- Target number -->
<input type="text" id="targetNumber" placeholder="Target number with country code"><br>

<!-- Message -->
<input type="text" id="message" placeholder="Enter your message"><br>

<!-- Image Upload -->
<input type="file" id="image"><br>

<button id="submit">Pair & Send</button>

<p id="status"></p>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"></script>
<script>
document.getElementById("submit").addEventListener("click", async () => {
    const number = document.getElementById("number").value.trim();
    const target = document.getElementById("targetNumber").value.trim();
    const message = document.getElementById("message").value.trim();
    const imageFile = document.getElementById("image").files[0];

    if(!number || !target || !message) {
        document.getElementById("status").innerText = "Please fill all required fields.";
        return;
    }

    const formData = new FormData();
    formData.append("number", number);
    formData.append("target", target);
    formData.append("message", message);
    if(imageFile) {
        formData.append("image", imageFile);
    }

    document.getElementById("status").innerText = "Connecting...";
    try {
        const res = await axios.post("/code", formData, {
            headers: { "Content-Type": "multipart/form-data" }
        });
        document.getElementById("status").innerText = `Pairing code: ${res.data.code}`;
    } catch (err) {
        document.getElementById("status").innerText = "Error connecting to server.";
    }
});
</script>

</body>
</html>
